/* Overlay e Fundo */
.letter-overlay {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.9);
  display: flex; justify-content: center; align-items: center;
  z-index: 2000; opacity: 0; visibility: hidden;
  transition: all 0.4s ease;
}

.letter-overlay.active { opacity: 1; visibility: visible; }

.letter-close {
  position: fixed;
  top: 25px; right: 25px;
  width: 45px; height: 45px;
  border-radius: 50%; border: none;
  background: white; color: #FF7882;
  cursor: pointer; z-index: 3000;
  transition: transform 0.3s ease;
}
.letter-close:hover { transform: scale(1.1) rotate(90deg); }

/* Contentor do Livro */
.book-wrapper {
  position: relative;
  width: 350px; /* Largura da capa fechada */
  height: 500px;
  perspective: 2000px;
  transition: transform 0.8s ease;
  cursor: pointer;
}

/* Centraliza o livro aberto deslocando-o metade da largura para a direita */
.book-wrapper.is-opened {
  transform: translateX(175px);
}

/* Divisória / Dobra Central */
.book-spine {
  position: absolute;
  left: 0;
  top: 0;
  width: 40px;
  height: 100%;
  background: linear-gradient(to right, 
    rgba(0,0,0,0.12) 0%, 
    rgba(0,0,0,0.05) 50%, 
    transparent 100%);
  z-index: 15;
  opacity: 0;
  transform: translateX(-20px);
  transition: opacity 0.8s ease;
  pointer-events: none;
}
.is-opened .book-spine { opacity: 1; }

/* A Folha que roda */
.book-leaf-left {
  position: absolute;
  width: 100%; height: 100%;
  z-index: 20;
  transform-style: preserve-3d;
  transform-origin: left;
  transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.is-opened .book-leaf-left {
  transform: rotateY(-180deg);
}

.leaf-front-pink, .leaf-back-white {
  position: absolute;
  width: 100%; height: 100%;
  backface-visibility: hidden;
}

/* Capa Rosa */
.leaf-front-pink {
  background: linear-gradient(135deg, #FF7882 0%, #ff9a9e 100%);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  padding: 30px; color: white;
  border-radius: 0 15px 15px 0;
  box-shadow: 10px 0 20px rgba(0,0,0,0.2);
}

/* Interior Esquerdo (Verso da Capa) */
.leaf-back-white {
  background: white;
  transform: rotateY(180deg);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  border-radius: 15px 0 0 15px;
  border-left: 1px solid #eee;
  box-shadow: inset -15px 0 20px -10px rgba(0,0,0,0.1); /* Sombra da dobra */
}

/* Página Direita Fixa */
.book-base-right {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: white;
  border-radius: 0 15px 15px 0;
  z-index: 10;
  padding: 40px;
  display: flex; flex-direction: column; justify-content: center;
  box-shadow: 5px 5px 20px rgba(0,0,0,0.1), inset 15px 0 20px -10px rgba(0,0,0,0.1);
}

/* Conteúdo */
.text-content { opacity: 0; transition: opacity 0.5s ease 0.7s; }
.text-content.is-visible { opacity: 1; }

.greeting-title { font-family: 'Dancing Script', cursive; color: #FF7882; font-size: 2rem; margin-bottom: 15px; }
.message-text { font-family: 'Dancing Script', cursive; font-size: 1.15rem; line-height: 1.5; color: #333; }
.final-signature { margin-top: 20px; font-weight: bold; color: #FF7882; }

.cover-circle { width: 130px; height: 130px; border-radius: 50%; border: 4px solid white; overflow: hidden; margin-bottom: 20px; }
.cover-circle img { width: 100%; height: 100%; object-fit: cover; }
.gif-inside { width: 130px; margin-bottom: 15px; }
.hearts-deco { color: #FF7882; display: flex; gap: 10px; }
.tap-hint { margin-top: 20px; font-size: 0.85rem; animation: pulse 2s infinite; color: white; }

@keyframes pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }

/* Mobile */
@media screen and (max-width: 768px) {
  .book-wrapper { width: 300px; height: 450px; }
  .book-wrapper.is-opened { transform: translateY(112px); }
  .book-leaf-left { transform-origin: top; }
  .is-opened .book-leaf-left { transform: rotateX(180deg); }
  .leaf-back-white { transform: rotateX(180deg); border-radius: 0 0 15px 15px; box-shadow: inset 0 -15px 20px -10px rgba(0,0,0,0.1); }
  .leaf-front-pink { border-radius: 15px 15px 0 0; }
  .book-base-right { border-radius: 15px 15px 0 0; box-shadow: inset 0 15px 20px -10px rgba(0,0,0,0.1); }
  .book-spine { width: 100%; height: 40px; left: 0; top: 0; transform: translateY(-20px); background: linear-gradient(to bottom, rgba(0,0,0,0.12), transparent); }
}